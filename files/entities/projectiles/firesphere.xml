<Entity
    name="$projectile_default"
    tags="projectile_player"
>

    <Base file="data/entities/base_projectile.xml">
        <VelocityComponent
            gravity_y="0"
            air_friction="0.5"
            mass="0.04"
        />
    </Base>

    <ProjectileComponent
        _enabled="1"
        lob_min="0.1"
        lob_max="0.9"
        speed_min="1"
        speed_max="1"
        friction="1"
        direction_random_rad="0"
        on_death_explode="1"
        on_death_gfx_leave_sprite="0"
        on_lifetime_out_explode="0"
        explosion_dont_damage_shooter="1"
        lifetime="120"
        bounce_always="1"
        bounces_left="420"
        bounce_energy="1"
        velocity_sets_scale="0"
        friendly_fire="1"
        collide_with_shooter_frames="0"
        on_collision_die="0"
        damage="1.0"
        lifetime_randomness="7"
        ragdoll_force_multiplier="0.01"
        hit_particle_force_multiplier="0.1"
        blood_count_multiplier="0"
        velocity_sets_rotation="1"
        muzzle_flash_file="data/entities/particles/muzzle_flashes/muzzle_flash_magic_small.xml"
        shoot_light_flash_r="70"
        shoot_light_flash_g="190"
        shoot_light_flash_b="255"
        shoot_light_flash_radius="64"
        knockback_force="0.7"
        physics_impulse_coeff="2000"
        damage_every_x_frames="30"
        >
        <config_explosion damage="0.0" explosion_radius="0" />
        <damage_by_type fire="1.5" />
		<damage_critical chance="-420.0" damage_multiplier="1.0" />
        <!-- You can do a crit build if you try hard enough but whatever -->
    </ProjectileComponent>
    <LightComponent
        _enabled="1"
        radius="60"
        fade_out_time="0.1"
        r="10"
        g="40"
        b="80"
    />

    <AudioComponent
        file="data/audio/Desktop/projectiles.bank"
        event_root="projectiles/fireball"
    />

    <VariableStorageComponent
        name="projectile_file"
        value_string="mods/copis_things/files/entities/projectiles/firesphere.xml"
    />

	<LuaComponent
        remove_after_executed="1"
        execute_on_added="1"
		script_source_file="mods/copis_things/files/scripts/projectiles/firesphere_start.lua"
    />

	<LuaComponent
		script_source_file="mods/copis_things/files/scripts/projectiles/firesphere_grow.lua"
    />

    <ParticleEmitterComponent
        _tags="fire"
        emitted_material_name="spark"
        custom_style="FIRE"
        offset.x="0"
        offset.y="0"
        x_pos_offset_min="-3"
        x_pos_offset_max="3"
        y_pos_offset_min="-3"
        y_pos_offset_max="3"
        x_vel_min="-2"
        x_vel_max="2"
        y_vel_min="-20"
        y_vel_max="-10"
        count_min="256"
        count_max="256"
        lifetime_min="0.3"
        lifetime_max="0.4"
        create_real_particles="1"
        emit_cosmetic_particles="0"
        emission_interval_min_frames="1"
        emission_interval_max_frames="3"
        area_circle_radius.min="0"
        area_circle_radius.max="10"
        render_ultrabright="1"
    />
    <ParticleEmitterComponent
        _tags="fire"
        emitted_material_name="fire"
        offset.x="0"
        offset.y="0"
        x_pos_offset_min="-3"
        x_pos_offset_max="3"
        y_pos_offset_min="-3"
        y_pos_offset_max="3"
        x_vel_min="-2"
        x_vel_max="2"
        y_vel_min="-20"
        y_vel_max="-10"
        count_min="256"
        count_max="256"
        lifetime_min="0.3"
        lifetime_max="0.4"
        create_real_particles="1"
        emit_cosmetic_particles="0"
        emission_interval_min_frames="1"
        emission_interval_max_frames="3"
        area_circle_radius.min="0"
        area_circle_radius.max="10"
        render_ultrabright="1"
    />
    <GameAreaEffectComponent
        _tags="fire"
        radius="10"
        collide_with_tag="hittable"
        frame_length="1"
    />
    <MagicConvertMaterialComponent
        _tags="fire"
        ignite_materials="99"
        from_material=""
        to_material=""
        steps_per_frame="5"
        loop="1"
        is_circle="1"
        radius="15"
    />
	
	<ParticleEmitterComponent 
        _tags="fire"
		emitted_material_name="spark_yellow"
		fade_based_on_lifetime="1"
		x_pos_offset_min="0"
		x_pos_offset_max="0"
		y_pos_offset_min="0"
		y_pos_offset_max="0"
		x_vel_min="-40"
		x_vel_max="40"
		y_vel_min="-40"
		y_vel_max="40"
		area_circle_radius.min="16"
		area_circle_radius.max="42"
		velocity_always_away_from_center="250"
		gravity.y="0"
		friction="0.1"
		airflow_force="0.9"
		airflow_time="0.101"
		airflow_scale="0.81"
		count_min="10"
		count_max="20"
		lifetime_min="0.1"
		lifetime_max="0.1"
		create_real_particles="0"
		emit_cosmetic_particles="1"
		draw_as_long="1"
		collide_with_grid="0"
		render_on_grid="1"
		emission_interval_min_frames="2"
		emission_interval_max_frames="4"
		render_ultrabright="1"
		is_emitting="1"
    />

</Entity>